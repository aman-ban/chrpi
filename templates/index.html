{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}
<div class="feed-container">

    {% if posts %}
        <div class="post-list">
            {% for post in posts %}
            <div class="post-card">

                <a href="{{ url_for('post', post_id=post['id']) }}" class="post-image-link">
                    {% if post['image_path'] %}
                        <img src="{{ url_for('static', filename='uploads/' ~ post['image_path']) }}"
                             class="post-image"
                             alt="Post Image">
                    {% endif %}
                </a>

                <div class="post-body">
                    <a class="post-text-link"
                       href="{{ url_for('post', post_id=post['id']) }}">
                       {{ post['text'] }}
                    </a>

                    {% if post['link'] %}
                    <div class="post-link-container">
                        <a href="{{ post['link'] }}" class="story-link" target="_blank" rel="noopener noreferrer">
                            üîó {{ post['link'] }}
                        </a>
                    </div>
                    {% endif %}

                    <div class="post-meta">
                        <span class="post-reactions">‚≠ê {{ post['smiles'] }}</span>
                        <span class="post-divider">‚Ä¢</span>
                        <span class="post-author">
                            by <a href="{{ url_for('profile', user_id=post['user_id']) }}">{{ post['username'] }}</a>
                        </span>
                        <span class="post-divider">‚Ä¢</span>
                        <span class="post-time">{{ post['created_at'] }}</span>
                    </div>
                </div>

            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <div class="empty-state-emoji">üì≠</div>
            <h3>No posts yet!</h3>
            <p>Be the first to share something uplifting.</p>
            <a href="{{ url_for('create_post') }}" class="btn btn-primary">
                Share Your Story
            </a>
        </div>
    {% endif %}

</div>
{% endblock %}