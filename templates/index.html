{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}
<div class="feed-container">

    <div class="search-section">
        <form action="{{ url_for('search') }}" method="GET" class="search-form">
            <input type="text" name="q" placeholder="Search for positive people...">
            <button type="submit" class="btn btn-secondary" >Search</button>
        </form>
    </div>

    {% if posts %}
        <div class="post-list">
            {% for post in posts %}
            <div class="post-card" style="border: 1px solid #eee; padding: 15px; margin-bottom: 20px; border-radius: 10px;">

                <a href="{{ url_for('view_single_post', post_id=post['id']) }}" class="post-image-link">
                    {% if post['image'] %}
                        <img src="{{ post['image'] }}" class="post-image" alt="Post Image" style="max-width: 100%; border-radius: 8px;">
                    {% endif %}
                </a>

                <div class="post-body">
                    <a class="post-text-link" href="{{ url_for('view_single_post', post_id=post['id']) }}" style="text-decoration: none; color: #333; font-size: 1.2rem; display: block; margin: 10px 0;">
                       {{ post['content'] }}
                    </a>

                    {% if post['link'] %}
                    <div class="post-link-container">
                        <a href="{{ post['link'] }}" class="story-link" target="_blank" rel="noopener noreferrer">
                            ðŸ”— {{ post['link'] }}
                        </a>
                    </div>
                    {% endif %}

                    <div class="post-meta" style="font-size: 0.9rem; color: #777;">
                        <span class="post-reactions">ðŸ˜Š {{ post['smiles'] }}</span>
                        <span class="post-divider">â€¢</span>
                        <span class="post-author">
                            by <a href="{{ url_for('user_profile', username=post['username']) }}">{{ post['username'] }}</a>
                        </span>
                        <span class="post-divider">â€¢</span>
                        <span class="post-time">{{ post['timestamp']|datetime }}</span>
                    </div>
                </div>

            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state" style="text-align: center; padding: 50px;">
            <div class="empty-state-emoji" style="font-size: 3rem;">ðŸ“­</div>
            <h3>No posts yet!</h3>
            <p>Be the first to share something uplifting.</p>
            <a href="{{ url_for('create_post') }}" class="btn btn-primary">Share Your Story</a>
        </div>
    {% endif %}

</div>
{% endblock %}