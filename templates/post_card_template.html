<div class="post-card">
    <div class="post-body">

        <a href="{{ url_for('view_single_post', post_id=post.id) }}" class="text-decoration-none">

            {% if post.content %}
                <p class="post-content-text">{{ post.content }}</p>
            {% endif %}

            {% if post.link %}
                <p>
                    <a href="{{ post.link }}" target="_blank" class="story-link">
                        ðŸ”— View External Story
                    </a>
                </p>
            {% endif %}

        </a>

        {% if post.image %}
            <img src="{{ post.image }}" class="post-image" alt="Post image">
        {% endif %}

        <div class="d-flex justify-content-between align-items-center mt-3">

            <div class="d-flex align-items-center reaction-area">
                {% set allowed_emojis = ['ðŸ˜Š', 'ðŸ˜‚', 'ðŸ¥¹', 'ðŸ¥°', 'ðŸ¤©', 'ðŸ¥³'] %}

                {% for emoji in allowed_emojis %}

                    {% set count = post.reaction_counts_dict.get(emoji, 0) %}

                    <form action="{{ url_for('smile', post_id=post.id) }}" method="POST" style="display:inline-block; margin-right: 5px;">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        <input type="hidden" name="reaction" value="{{ emoji }}"/>

                        <button type="submit"
                                class="btn btn-sm btn-smile
                                       {% if post.user_reaction == emoji %}btn-smile-active{% endif %}"
                                title="React with {{ emoji }}">
                            {{ emoji }}
                        </button>

                        {% if count > 0 %}
                            <div class="reaction-count-display text-center small fw-bold">
                                {{ count }}
                            </div>
                        {% endif %}
                    </form>
                {% endfor %}

                </div>

            <div class="post-meta">
                Posted by
                <a href="{{ url_for('user_profile', username=post.username) }}">@{{ post.username }}</a><br>
                {{ post.timestamp | datetime }}
            </div>
        </div>
    </div>
</div>