{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<h1 class="page-title">{{ title }}</h1>

<div class="post-list">
    {% if not posts %}
        <div class="text-center p-5">
            <p class="fs-4 text-muted">No posts have received any smiles yet!</p>
        </div>
    {% endif %}

    {% for post in posts %}
        {% include 'post_card_template.html' %}
    {% endfor %}

        <span class="post-meta ms-2">
            {% if post.top_reactions %}
                {% for reaction_pair in post.top_reactions.split(',') %}
                    {% set parts = reaction_pair.split(':') %}
                    <span title="{{ parts[1] }} total reactions with {{ parts[0] }}">
                        {{ parts[0] }} {{ parts[1] }}
                    </span>
                {% endfor %}
            {% else %}
                Total Smiles: {{ post.smiles }}
            {% endif %}
        </span>
    </div>

    <div class="post-meta">
        Posted by
        <a href="{{ url_for('user_profile', username=post.username) }}">@{{ post.username }}</a>
        â€” {{ post.timestamp }}
    </div>

</div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}